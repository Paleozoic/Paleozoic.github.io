{"contentType":"application/gliffy+json","version":"1.1","metadata":{"title":"untitled","revision":0,"exportBorder":false},"embeddedResources":{"index":0,"resources":[]},"stage":{"objects":[{"x":742.5,"y":4.25,"rotation":0,"id":67,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":24,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[1.1368683772161603e-13,400.7652835513575]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":474.83916938110747,"y":1446.375,"rotation":0,"id":288,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":105,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[0,0]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1210,"y":795,"rotation":0,"id":377,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":124,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-29,19]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1194,"y":787,"rotation":0,"id":376,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":123,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[7,34]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":273,"y":808,"rotation":0,"id":375,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":122,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-22,13]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":258,"y":800,"rotation":0,"id":374,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":121,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[9,32]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":187.73070032573293,"y":740.25,"rotation":0,"id":368,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":119,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":369,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":10.031351791530938,"y":470,"rotation":0,"id":363,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":412.198697068404,"height":28,"lockAspectRatio":false,"lockShape":false,"order":118,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者宕机：2PC里协调者存在单点问题，如果开启了事务，参与者会等待协调者恢复后重新和协调者通信，汇报当前事务状态。这个等待过程是阻塞的。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1108.9391693811076,"y":730.25,"rotation":0,"id":352,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":116,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":353,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":810.5391693811073,"y":720.5,"rotation":0,"id":350,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":114,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":351,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":176.03094462540736,"y":869.25,"rotation":0,"id":347,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":300,"height":56,"lockAspectRatio":false,"lockShape":false,"order":113,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者和参与者A同时宕机，此时参与者B已经写入了log。参与者A则不确定。那么当协调者恢复工作，直接回滚A、B的事务即可保证系统的强一致性。（如果参与者也有Lease机制，可自行rollback）</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1005.3391693811075,"y":666.25,"rotation":0,"id":315,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":111,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":316,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者A</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":387.7899022801304,"y":674.25,"rotation":0,"id":317,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":108,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":318,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者A</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1311.3391693811077,"y":666.25,"rotation":0,"id":312,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":106,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":313,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者A</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":116.91042345276874,"y":695.25,"rotation":0,"id":322,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":174.42996742671014,"height":14,"lockAspectRatio":false,"lockShape":false,"order":104,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者无法发送消息给协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":798.8391693811075,"y":611.25,"rotation":0,"id":290,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":98.99999999999999,"height":30,"lockAspectRatio":false,"lockShape":false,"order":102,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":291,"uid":null,"width":94.99999999999999,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">提交阶段</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":31.83916938110753,"y":610.25,"rotation":0,"id":324,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":98.99999999999999,"height":30,"lockAspectRatio":false,"lockShape":false,"order":100,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":325,"uid":null,"width":94.99999999999999,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">准备阶段</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":299.6001628664495,"y":697.75,"rotation":0,"id":326,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":99,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-10.5279631614128,33]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":276.0008143322476,"y":705.75,"rotation":0,"id":327,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":98,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[36.8478710649448,20]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":182.57817589576547,"y":840.25,"rotation":0,"id":328,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":181.61237785016291,"height":14,"lockAspectRatio":false,"lockShape":false,"order":97,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">2.参与者告知协调者log已写入</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":416.51954397394127,"y":863.25,"rotation":0,"id":329,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":96,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[2.0521172638438543,-3],[-203.15960912052117,-63]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":334,"px":0.5,"py":1}}},"linkMap":[]},{"x":418.57166123778495,"y":679.25,"rotation":0,"id":330,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":95,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-2.105592632282537,-4],[-205.21172638436485,61]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[]},"linkMap":[]},{"x":261.19055374592836,"y":760.25,"rotation":0,"id":331,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":210.00000000000003,"height":28,"lockAspectRatio":false,"lockShape":false,"order":94,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">1.协调者请求参与者开启事务（锁资源），写入undo/redo log</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":248.24592833876224,"y":775.25,"rotation":0,"id":332,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":93,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-4.104234527687481,-5],[139.54397394136814,55]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":334,"px":0,"py":0.5}}},"linkMap":[]},{"x":249.27198697068408,"y":772.25,"rotation":0,"id":333,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":92,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-5.130293159609323,-2],[142.1275026790735,-62]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[]},"linkMap":[]},{"x":387.7899022801304,"y":800.25,"rotation":0,"id":334,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":61.56351791530946,"height":60,"lockAspectRatio":true,"lockShape":false,"order":90,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2312703583061886,"y":0,"rotation":0,"id":335,"uid":null,"width":59.10097719869708,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">参与者B</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":744.3391693811075,"y":604.5,"rotation":0,"id":289,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":89,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[1.1368683772161603e-13,400.7652835513575]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1087.1391693811079,"y":681.25,"rotation":0,"id":292,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":170,"height":14,"lockAspectRatio":false,"lockShape":false,"order":88,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者无法发送消息给协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":798.8391693811075,"y":678.25,"rotation":0,"id":293,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":160,"height":14,"lockAspectRatio":false,"lockShape":false,"order":87,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者无法发送信息给参与者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":949.3845846119359,"y":883.25,"rotation":0,"id":294,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":361.9545847691715,"height":84,"lockAspectRatio":false,"lockShape":false,"order":86,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者和参与者A同时宕机，此时参与者B已经提交了事务，但无法通知协调者。A由于宕机，不知道其事务状态。假设A已经commit，则数据一致。假设没有commit，但由于B已commit，期间B的数据都是脏读，并且A恢复后，A还是preCommit状态。协调者也没有A的事务状态。那么这个preComit事务协调者是是让A提交还是回滚？（事务状态不可知，产生脏数据）</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":964.3391693811075,"y":699.5,"rotation":0,"id":295,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":85,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-9,32]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":946.3391693811075,"y":709.5,"rotation":0,"id":296,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":84,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[29,18]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1193.3391693811077,"y":700.25,"rotation":0,"id":297,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":83,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-10,28]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1176.3391693811077,"y":704.25,"rotation":0,"id":298,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":82,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[24,21]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1101.3391693811077,"y":827.5,"rotation":0,"id":299,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":177,"height":28,"lockAspectRatio":false,"lockShape":false,"order":81,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">4.参与者提交事务，释放资源，并返回ack给协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1339.3391693811077,"y":850.5,"rotation":0,"id":300,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":80,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[2,-3],[-198,-63]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":305,"px":0.5,"py":1}}},"linkMap":[]},{"x":1341.3391693811077,"y":666.5,"rotation":0,"id":301,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":79,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,1],[-200,61]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1175.3391693811077,"y":750.5,"rotation":0,"id":302,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":230,"height":14,"lockAspectRatio":false,"lockShape":false,"order":78,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">3.协调者请求参与者提交事务</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1175.3391693811077,"y":762.5,"rotation":0,"id":303,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":77,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-4,-5],[136,55]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":305,"px":0,"py":0.5}}},"linkMap":[]},{"x":1176.3391693811077,"y":759.5,"rotation":0,"id":304,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":76,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-5,-2],[135,-62]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1311.3391693811077,"y":787.5,"rotation":0,"id":305,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":74,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":306,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">参与者B</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":869.3391693811075,"y":747.75,"rotation":0,"id":307,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":230,"height":14,"lockAspectRatio":false,"lockShape":false,"order":73,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">3.协调者请求参与者提交事务</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":869.3391693811075,"y":759.75,"rotation":0,"id":308,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":72,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-4,-5],[136,55]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":310,"px":0,"py":0.5}}},"linkMap":[]},{"x":870.3391693811075,"y":756.75,"rotation":0,"id":309,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":71,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-5,-2],[135,-62]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1005.3391693811075,"y":784.75,"rotation":0,"id":310,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":69,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":311,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">参与者B</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":246.35342019543964,"y":773.5625,"rotation":0,"id":202,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":67,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[0,0]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":370.8599348534203,"y":270,"rotation":0,"id":191,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":270,"height":56,"lockAspectRatio":false,"lockShape":false,"order":66,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者无法发送消息给协调者，则参与者A的可能写入了log，也有可能没写入，超时后，参与者B被通知回滚事务。当A恢复后，A未提交的事务也直接rollback。同样会阻塞资源。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":940,"y":340,"rotation":0,"id":187,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":330,"height":28,"lockAspectRatio":false,"lockShape":false,"order":65,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">PS：由于准备阶段已经写入了undo/redo log，并且log是被认为持久化、不可改变的，所以提交事务是不可能失败的。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":997.5,"y":70,"rotation":0,"id":184,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":63,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":185,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者A</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1129.5,"y":270,"rotation":0,"id":178,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":400,"height":56,"lockAspectRatio":false,"lockShape":false,"order":61,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者无法发送消息给协调者，则参与者A的事务状态可能是commit或者preCommit。协调者会等待节点A恢复，参与者A如果是preCommit状态，协调者则通知A提交事务并返回（协调者一直存活，知道A应该提交事务）。期间会有脏读。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":588.4364820846909,"y":68,"rotation":0,"id":176,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":59,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":177,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者A</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":229.3159609120521,"y":68,"rotation":0,"id":174,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":57,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":175,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者A</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1303.5,"y":70,"rotation":0,"id":172,"uid":"com.gliffy.shape.venn.radial.default.FF0000","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":55,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.venn_circle.radial","strokeWidth":2,"strokeColor":"#000000","fillColor":"#FF0000","gradient":true,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":173,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者A</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":12.160830618892476,"y":267,"rotation":0,"id":127,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":307.39617263843667,"height":56,"lockAspectRatio":false,"lockShape":false,"order":54,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者无法发送信息给参与者，则参与者无法写入log，则协调者通知参与者B回滚事务，并释放资源。参与者A失联到超时的时间内，参与者B的事务资源被锁定，出现阻塞。加入参与者A恢复，则直接回滚未提交的事务。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":317.55700325732914,"y":89,"rotation":0,"id":125,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":174.42996742671014,"height":14,"lockAspectRatio":false,"lockShape":false,"order":53,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者无法发送消息给协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":26.104234527687296,"y":82,"rotation":0,"id":124,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":160,"height":14,"lockAspectRatio":false,"lockShape":false,"order":52,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者无法发送信息给参与者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":791,"y":15,"rotation":0,"id":122,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":98.99999999999999,"height":30,"lockAspectRatio":false,"lockShape":false,"order":50,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":123,"uid":null,"width":94.99999999999999,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">提交阶段</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":24.000000000000007,"y":14,"rotation":0,"id":119,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":98.99999999999999,"height":30,"lockAspectRatio":false,"lockShape":false,"order":48,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":121,"uid":null,"width":94.99999999999999,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">准备阶段</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":500.2467426710099,"y":91.5,"rotation":0,"id":108,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":47,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-10.5279631614128,33]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":476.647394136808,"y":99.5,"rotation":0,"id":107,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":46,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[36.8478710649448,20]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":383.2247557003259,"y":234,"rotation":0,"id":93,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":181.61237785016291,"height":14,"lockAspectRatio":false,"lockShape":false,"order":45,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">2.参与者告知协调者log已写入</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":617.1661237785017,"y":257,"rotation":0,"id":95,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":44,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[2.0521172638437974,-3],[-203.15960912052122,-63]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":100,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":104,"px":0.5,"py":1}}},"linkMap":[]},{"x":619.2182410423454,"y":73,"rotation":0,"id":96,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":43,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-2.105592632282537,-4],[-205.2117263843649,61]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":104,"px":0.5,"py":0}}},"linkMap":[]},{"x":438.17391304347836,"y":150,"rotation":0,"id":97,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":210.00000000000003,"height":28,"lockAspectRatio":false,"lockShape":false,"order":42,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">1.协调者请求参与者开启事务（锁资源），写入undo/redo log</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":448.89250814332263,"y":169,"rotation":0,"id":98,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":41,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-4.1042345276873675,-5],[139.54397394136822,55]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":104,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":100,"px":0,"py":0.5}}},"linkMap":[]},{"x":449.91856677524447,"y":166,"rotation":0,"id":99,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":40,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-5.130293159609209,-2],[142.12750267907347,-62]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":104,"px":1,"py":0.5}}},"linkMap":[]},{"x":588.4364820846909,"y":194,"rotation":0,"id":100,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":61.56351791530946,"height":60,"lockAspectRatio":true,"lockShape":false,"order":38,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2312703583061886,"y":0,"rotation":0,"id":101,"uid":null,"width":59.10097719869708,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">参与者B</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":383.2247557003258,"y":134,"rotation":0,"id":104,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":61.56351791530946,"height":60,"lockAspectRatio":true,"lockShape":false,"order":36,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2312703583061886,"y":0,"rotation":0,"id":105,"uid":null,"width":59.10097719869708,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":185.19543973941373,"y":107,"rotation":0,"id":90,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":35,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-11.580759477554125,31]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":165.70032573289905,"y":113,"rotation":0,"id":89,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":34,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[29.47829685195603,20]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":24.104234527687296,"y":229.5,"rotation":0,"id":75,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":181.61237785016291,"height":14,"lockAspectRatio":false,"lockShape":false,"order":33,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">2.参与者告知协调者log已写入</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":258.04560260586334,"y":252.5,"rotation":0,"id":77,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":32,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[2.0521172638435132,-3],[-203.1596091205213,-63]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":82,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":86,"px":0.5,"py":1}}},"linkMap":[]},{"x":132.86644951140067,"y":145.5,"rotation":0,"id":79,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":235.99348534201962,"height":28,"lockAspectRatio":false,"lockShape":false,"order":31,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">1.协调者请求参与者开启事务（锁资源），写入undo/redo log</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":89.77198697068408,"y":164.5,"rotation":0,"id":80,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":30,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-4.104234527687325,-5],[139.54397394136802,55]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":86,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":82,"px":0,"py":0.5}}},"linkMap":[]},{"x":90.79804560260587,"y":161.5,"rotation":0,"id":81,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":102.60586319218243,"height":100,"lockAspectRatio":false,"lockShape":false,"order":29,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-5.13029315960911,-2],[142.12750267907361,-63.5]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":86,"px":1,"py":0.5}}},"linkMap":[]},{"x":229.3159609120521,"y":189.5,"rotation":0,"id":82,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":61.56351791530946,"height":60,"lockAspectRatio":true,"lockShape":false,"order":27,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2312703583061886,"y":0,"rotation":0,"id":83,"uid":null,"width":59.10097719869708,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">参与者B</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":24.104234527687296,"y":129.5,"rotation":0,"id":86,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":61.56351791530946,"height":60,"lockAspectRatio":true,"lockShape":false,"order":25,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2312703583061886,"y":0,"rotation":0,"id":87,"uid":null,"width":59.10097719869708,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1079.3000000000002,"y":85,"rotation":0,"id":64,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":170,"height":14,"lockAspectRatio":false,"lockShape":false,"order":23,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">参与者无法发送消息给协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":791,"y":82,"rotation":0,"id":63,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":160,"height":14,"lockAspectRatio":false,"lockShape":false,"order":22,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者无法发送信息给参与者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":791,"y":277,"rotation":0,"id":59,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":319.1091695383435,"height":56,"lockAspectRatio":false,"lockShape":false,"order":21,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; line-height: 14px; color: rgb(0, 0, 0);\">协调者无法发送信息给参与者，则参与者无法commit事务。但参与者B已经被要求提交事务。所以此时客户端必须等待参与者A恢复，并和协调者通信，协调者会让A将事务提交。等待A恢复期间，由于B已commit，产生脏读数据。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":956.5,"y":103.25,"rotation":0,"id":56,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":20,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-9,32]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":938.5,"y":113.25,"rotation":0,"id":55,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":19,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[29,18]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1185.5,"y":104,"rotation":0,"id":40,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":18,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[-10,28]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1168.5,"y":108,"rotation":0,"id":41,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":17,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":0,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,0],[24,21]],"lockSegments":{}}},"children":null,"linkMap":[]},{"x":1093.5,"y":231.25,"rotation":0,"id":42,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":177,"height":28,"lockAspectRatio":false,"lockShape":false,"order":16,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">4.参与者提交事务，释放资源，并返回ack给协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1331.5,"y":254.25,"rotation":0,"id":43,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":15,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[2,-3],[-198,-63]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":48,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":52,"px":0.5,"py":1}}},"linkMap":[]},{"x":1333.5,"y":70.25,"rotation":0,"id":44,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":14,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[0,1],[-200,61]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":52,"px":0.5,"py":0}}},"linkMap":[]},{"x":1167.5,"y":154.25,"rotation":0,"id":45,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":230,"height":14,"lockAspectRatio":false,"lockShape":false,"order":13,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">3.协调者请求参与者提交事务</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1167.5,"y":166.25,"rotation":0,"id":46,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":12,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-4,-5],[136,55]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":52,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":48,"px":0,"py":0.5}}},"linkMap":[]},{"x":1168.5,"y":163.25,"rotation":0,"id":47,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":11,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-5,-2],[135,-62]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":52,"px":1,"py":0.5}}},"linkMap":[]},{"x":1303.5,"y":191.25,"rotation":0,"id":48,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":9,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":49,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">参与者B</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1103.5,"y":131.25,"rotation":0,"id":52,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":7,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":53,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":861.5,"y":151.5,"rotation":0,"id":16,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":230,"height":14,"lockAspectRatio":false,"lockShape":false,"order":6,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">3.协调者请求参与者提交事务</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":861.5,"y":163.5,"rotation":0,"id":17,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":5,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-4,-5],[136,55]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":19,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":23,"px":0,"py":0.5}}},"linkMap":[]},{"x":862.5,"y":160.5,"rotation":0,"id":18,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":4,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":false,"interpolationType":"linear","cornerRadius":null,"controlPath":[[-5,-2],[135,-62]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":19,"px":1,"py":0.5}}},"linkMap":[]},{"x":997.5,"y":188.5,"rotation":0,"id":23,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":2,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":24,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">参与者B</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":797.5,"y":128.5,"rotation":0,"id":19,"uid":"com.gliffy.shape.basic.basic_v1.default.circle","width":60,"height":60,"lockAspectRatio":true,"lockShape":false,"order":0,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.ellipse.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":1.2,"y":0,"rotation":0,"id":20,"uid":null,"width":57.6,"height":14,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 12px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 14px; color: rgb(0, 0, 0);\">协调者</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]}],"background":"#FFFFFF","width":1529.5,"height":1451,"maxWidth":5000,"maxHeight":5000,"nodeIndex":405,"autoFit":true,"exportBorder":false,"gridOn":true,"snapToGrid":true,"drawingGuidesOn":true,"pageBreaksOn":false,"printGridOn":false,"printPaper":"LETTER","printShrinkToFit":false,"printPortrait":true,"shapeStyles":{"com.gliffy.shape.basic.basic_v1.default":{"fill":"#FFFFFF","stroke":"#333333","strokeWidth":2}},"lineStyles":{"global":{}},"textStyles":{},"themeData":null}}